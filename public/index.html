<!DOCTYPE html>
<html>

<head>
    <title>CollaboWriter</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <textarea id="pad" autofocus="">Connecting...</textarea>
    <script src="js/sharejs/text.js"></script>
    <script src="js/sharejs/share.uncompressed.js"></script>
    <script>
        var pad = document.getElementById('pad');

        var ws = new WebSocket('ws://' + window.location.host);
        
        var sjs = new window.sharejs.Connection(ws);

        var doc = sjs.get('users', 'seph');
        console.log(doc);
        doc.subscribe();

        doc.whenReady(function () {
            if (!doc.type) doc.create('text');
            if (doc.type && doc.type.name === 'text')
                doc.attachTextarea(pad);
        });
    </script>
</body>

</html>
